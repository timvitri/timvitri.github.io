<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title id="page-title">Tiểu sử Đức quốc công Đào Minh Quân</title>
    <meta name="description" id="meta-description" content="Tội ác cộng sản với Đào Minh Quân và công ơn cao cả của Ngài.">
    
    <meta property="og:title" id="og-title-tag" content="Tiểu sử Đức quốc công Đào Minh Quân">
    <meta property="og:description" id="og-desc-tag" content="Tội ác cộng sản với Đào Minh Quân và công ơn cao cả của Ngài.">
    <meta property="og:image" id="og-img-tag" content="https://i.ibb.co/ynRQ20S0/att-v-SGAhgzni-Sg77k-RFCc0u-Dz-sj-HLvv-G0-Wu-Vk-Y3-HSe0.jpg">
    <meta property="og:type" content="website">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .admin-panel { background: #f8fafc; border-right: 1px solid #e2e8f0; }
        .preview-screen { background: #ffffff; }
        .live-log { background: #fffbe7; }
    </style>
</head>
<body class="bg-gray-100 flex flex-col md:flex-row min-h-screen">

    <aside class="admin-panel w-full md:w-1/3 p-6 space-y-6 overflow-y-auto">
        <div>
            <h1 class="text-xl font-bold text-gray-800 border-b pb-2 mb-4">Cấu hình SEO & Social</h1>
            <p class="text-sm text-gray-500 mb-4">Chỉnh sửa thông tin dưới đây để cập nhật thẻ Meta của trang.</p>
        </div>

        <div class="space-y-4">
            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-1">Tiêu đề trang (Title Tag)</label>
                <input type="text" id="input-title" oninput="updateSEO()" placeholder="Nhập tiêu đề..."
                    class="w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none">
            </div>

            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-1">Mô tả Meta (Meta Description)</label>
                <textarea id="input-desc" oninput="updateSEO()" rows="3" placeholder="Nhập mô tả SEO..."
                    class="w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"></textarea>
            </div>

            <hr class="border-gray-300">

            <div>
                <label class="block text-sm font-semibold text-blue-700 mb-1">OG Title (Facebook/Zalo)</label>
                <input type="text" id="input-og-title" oninput="updateSEO()" placeholder="Nhập tiêu đề mạng xã hội..."
                    class="w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none">
            </div>

            <div>
                <label class="block text-sm font-semibold text-blue-700 mb-1">OG Description</label>
                <textarea id="input-og-desc" oninput="updateSEO()" rows="3" placeholder="Nhập mô tả mạng xã hội..."
                    class="w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none"></textarea>
            </div>

            <div>
                <label class="block text-sm font-semibold text-blue-700 mb-1">Link ảnh đại diện (OG Image URL)</label>
                <input type="text" id="input-og-img" oninput="updateSEO()" placeholder="https://example.com/image.jpg"
                    class="w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <button onclick="saveSettings()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg shadow-lg transition">
                Lưu cài đặt
            </button>
        </div>

        <!-- Live Target Log -->
        <div class="live-log mt-8 p-4 rounded shadow border border-yellow-300">
            <h2 class="font-semibold text-yellow-800 text-lg mb-2">Nhật ký live</h2>
            <table class="w-full text-sm text-yellow-700" id="live-log-table">
                <thead>
                    <tr>
                        <th class="text-left py-1">Thời gian</th>
                        <th class="text-left py-1">Thiết bị</th>
                        <th class="text-left py-1">IP</th>
                        <th class="text-left py-1">Vị trí</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Live log sẽ được render ra đây -->
                </tbody>
            </table>
        </div>
    </aside>

    <main class="preview-screen flex-1 p-6 flex flex-col items-center justify-center">
        <h3 class="text-gray-400 uppercase tracking-widest text-xs mb-8">Bản xem trước trên mạng xã hội</h3>
        
        <div class="max-w-md w-full bg-white border border-gray-200 shadow-sm rounded-lg overflow-hidden">
            <img id="view-img" src="https://i.ibb.co/ynRQ20S0/att-v-SGAhgzni-Sg77k-RFCc0u-Dz-sj-HLvv-G0-Wu-Vk-Y3-HSe0.jpg" alt="Preview Image" class="w-full h-48 object-cover">
            <div class="p-4 bg-gray-50">
                <p class="text-xs text-gray-400 uppercase mb-1">website.com</p>
                <h4 id="view-title" class="text-lg font-bold text-gray-800 leading-tight mb-2 truncate">Tiểu sử Đức quốc công Đào Minh Quân</h4>
                <p id="view-desc" class="text-sm text-gray-600 line-clamp-2">Tội ác cộng sản với Đào Minh Quân và công ơn cao cả của Ngài.</p>
            </div>
        </div>

        <div class="mt-8 p-4 bg-yellow-50 border border-yellow-100 rounded text-sm text-yellow-700 max-w-lg text-center">
            <strong>Ghi chú:</strong> Các thay đổi sẽ cập nhật trực tiếp vào thẻ <code>&lt;head&gt;</code> của trang này. Bạn có thể nhấn F12 để kiểm tra.
        </div>
    </main>

    <script>
        // Khởi tạo dữ liệu mặc định
        const defaultData = {
            title: "Tiểu sử Đức quốc công Đào Minh Quân",
            desc: "Tội ác cộng sản với Đào Minh Quân và công ơn cao cả của Ngài.",
            ogTitle: "Tiểu sử Đức quốc công Đào Minh Quân",
            ogDesc: "Tội ác cộng sản với Đào Minh Quân và công ơn cao cả của Ngài.",
            ogImg: "https://i.ibb.co/ynRQ20S0/att-v-SGAhgzni-Sg77k-RFCc0u-Dz-sj-HLvv-G0-Wu-Vk-Y3-HSe0.jpg"
        };

        // Khởi tạo dữ liệu demo nhật ký
        let mockTargets = [
            { time: new Date().toLocaleTimeString(), device: "Android", ip: "123.123.12.1", location: "Hà Nội, VN" },
            { time: new Date().toLocaleTimeString(), device: "Windows PC", ip: "45.119.85.72", location: "HCM, VN" }
        ];

        // render log every 5s
        function renderLiveLog() {
            // Nếu có API hoặc localStorage thì lấy dữ liệu thật
            const tbody = document.querySelector("#live-log-table tbody");
            tbody.innerHTML = ""; // Xóa cũ

            mockTargets.forEach(t => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td class="py-1">${t.time}</td>
                    <td class="py-1">${t.device}</td>
                    <td class="py-1">${t.ip}</td>
                    <td class="py-1">${t.location}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        setInterval(() => {
            // Thêm mục giả hạn mới mỗi 5s để demo
            mockTargets.unshift({
                time: new Date().toLocaleTimeString(),
                device: ["Android", "iOS Device", "Windows PC"][Math.floor(Math.random()*3)],
                ip: `${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`,
                location: ["Hà Nội, VN", "HCM, VN", "Đà Nẵng, VN"][Math.floor(Math.random()*3)]
            });
            if(mockTargets.length > 10) mockTargets.pop();
            renderLiveLog();
        }, 5000);

        // Gán dữ liệu vào Input khi tải trang
        window.onload = () => {
            document.getElementById('input-title').value = defaultData.title;
            document.getElementById('input-desc').value = defaultData.desc;
            document.getElementById('input-og-title').value = defaultData.ogTitle;
            document.getElementById('input-og-desc').value = defaultData.ogDesc;
            document.getElementById('input-og-img').value = defaultData.ogImg;
            updateSEO();
            renderLiveLog();
        };

        function updateSEO() {
            const title = document.getElementById('input-title').value;
            const desc = document.getElementById('input-desc').value;
            const ogTitle = document.getElementById('input-og-title').value;
            const ogDesc = document.getElementById('input-og-desc').value;
            const ogImg = document.getElementById('input-og-img').value;

            document.title = title;
            document.getElementById('meta-description').setAttribute('content', desc);
            document.getElementById('og-title-tag').setAttribute('content', ogTitle);
            document.getElementById('og-desc-tag').setAttribute('content', ogDesc);
            document.getElementById('og-img-tag').setAttribute('content', ogImg);

            document.getElementById('view-title').innerText = ogTitle;
            document.getElementById('view-desc').innerText = ogDesc;
            document.getElementById('view-img').src = ogImg || "https://via.placeholder.com/1200x630";
        }

        function saveSettings() {
            alert("Đã cập nhật tất cả thẻ Meta thành công!");
            console.log("Dữ liệu đã lưu:", {
                title: document.title,
                description: document.getElementById('meta-description').content,
                og_image: document.getElementById('og-img-tag').content
            });
        }
    </script>
</body>
</html>
